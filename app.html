<!DOCTYPE html>
<html>

    <head>

        <title>zed</title>

        <meta http-equiv="content-language" content="en-US">
        <meta http-equiv="content-type" content="text/html; charset=utf-8">

        <script src="externals/traceur.js"></script>
        <script src="externals/es6-module-loader.js"></script>
        <script src="externals/restyle.max.js"></script>
        <script src="externals/document-register-element.max.js"></script>
        <script src="externals/draggabilly-modified.js"></script>
        <script src="externals/getStyleProperty.js"></script>
        <script src="externals/mousetrap.js"></script>
        <script src="externals/termlib.js"></script>
        <script src="externals/termlib_parser.js"></script>
        <script src="externals/polyfills/repeat.js"></script>
        <script src="externals/lodash.js"></script>
        <script src="externals/FileSaver.js"></script>

        <script src="lib/utils.js"></script>
        <script src="lib/selector.js"></script>
        <script src="lib/engine.js"></script>
        <script src="lib/view.js"></script>

        <script src="webcomponents/z-link.js"></script>
        <script src="webcomponents/z-port.js"></script>
        <script src="webcomponents/z-block.js"></script>

        <script src="externals/raphael-min.js"></script>
        <script src="externals/g.raphael-min.js"></script>
        <script src="externals/g.line-min.js"></script>

        <script src="externals/dygraph-combined.js"></script>

        <script src="externals/handsontable.full.js"></script>
        <link rel="stylesheet" media="screen" href="externals/handsontable.full.css">

        <link href="style.css" rel="stylesheet" type="text/css" />

        <script type="text/javascript">
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-47048956-1']);
            _gaq.push(['_trackPageview']);
            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
        </script>

    </head>

    <body>

        <div>
            <div style="float: left; width: 70%">
                <div style="overflow: hidden;">
                    <div style="float: left; width: 70%">
                        <div class="button-bar">
                            <button onclick="window.commands.remove()" onfocus="this.blur()">remove</button>
                            |
                            <button onclick="window.commands.addButton()" onfocus="this.blur()">button</button>
                            <button onclick="window.commands.addScript()" onfocus="this.blur()">script</button>
                            <button onclick="window.commands.addText()" onfocus="this.blur()">text</button>
                            <button onclick="window.commands.addNumber()" onfocus="this.blur()">number</button>
                            |
                            <button onclick="window.commands.edit()" onfocus="this.blur()">edit current block</button>
                            |
                            <button onclick="window.commands.goToCommandLine()" onfocus="this.blur()">command line</button>
                        </div>

                        <div id="edit" style='background:#f0f0f0;padding:15px;' onclick="switchMode('edit')">
                            <div id="patch" style='width500px;height:410px' onclick="window.selector.unselect()">
                            </div>
                        </div>
                    </div>

                    <div style="float: right; width: 29%;" onclick="switchMode('presentation')">
                        <div class="button-bar">
                            <button onclick="insertBlockContentInSelection();">insert block</button>
                            |
                            <button id="lock-button" onclick="lock();" disabled>use</button>
                            <button id="unlock-button" onclick="unlock();">edit</button>
                        </div>
                        <div class="view-frame">
                            <center style="margin: 30px; color: #777;">View</center>
                            <div id="presentation-div" style='height:200px'>
                                <div id="presentation" style="min-height:20px;text-align:center;" onclick="selectElement(event)">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="command-line-frame" class="command-line"
                    onclick="commands.goToCommandLine();"></div>

                <div style="color:#aaa;font-size:smaller;">
                    zed source codes are on <a style="color:#666" href="https://github.com/nnodot/zed">github</a>
                </div>
            </div>

            <div id="help" style="float: left; width: 20%;">
                <div id="help-bar">Keyboard shortcuts</div>
                <div id="help-content">

                    <p>
                        <tt>j, k</tt> Move around.
                    </p>
                    <p>
                        <tt>r</tt> Remove current block, link or port.
                    </p>
                    <p>
                        <tt>g</tt> Go to block. The key for each block is then displayed in the block. Just type the key of the block you want to select.
                    </p>
                    <p>
                        <tt>l</tt> Add a link between two ports. The key for each port is displayed next to it. Just type the keys for the two ports you want to link.
                    </p>
                    <br/>
                    <p>
                    Adding a new block just below the current block:
                    </p>
                    <p>
                        <tt>a h b</tt> Add a button block.
                    </p>
                    <p>
                        <tt>a h t</tt> Add a text block.
                    </p>
                    <p>
                        <tt>a h n</tt> Add a number block.
                    </p>
                    <p>
                        <tt>a h s</tt> Add a script block.
                    </p>
                    <br/>
                    <p>
                        <tt>e</tt> Edit content of the current block (except for button blocks). When you're done type <tt style="margin-right:0px;">Esc</tt> to leave editing.
                    </p>
                    <p>
                    <tt>c</tt> Go to the command line. While in the command line type <tt style="margin-right:0px;">Esc</tt> to leave it and go back to normal mode.
                    </p>
                    <p>
                        <tt>space</tt> Fire the current block, i.e. execute and/or send event to its output.
                    </p>
                </div>
            </div>
        </div>

    </body>

    <script type="module">
        import app from 'lib/app';
        app.init();
    </script>
</html>
